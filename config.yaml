# Level2 图像构建配置文件
# 测试配置

# ========== 数据路径 ==========
raw_data_dir: "/Users/shiyunshuo/Desktop/pythonproject/中邮基金/华泰金工vivit/通联逐笔数据"
output_dir: "/Users/shiyunshuo/Desktop/pythonproject/中邮基金/华泰金工vivit/output"

# ========== 任务范围配置 (REQ-003) ==========
# 方式1: 显式日期列表（优先级高于 start_date/end_date）
dates:
  - "20251030"
  # - "20251031"

# 方式2: 日期范围（包含两端）
# start_date: "20251030"
# end_date: "20251031"

# ========== 断点续传策略 (REQ-003) ==========
# true: 检测到 LMDB 文件存在则跳过（推荐）
# false: 仅依赖 .checkpoints/*.done 文件
skip_existing: true

# ========== 图像参数 ==========
num_channels: 15
num_price_bins: 8
num_qty_bins: 8

# ========== 分位数百分位 ==========
# 7个切割点定义8个区间
percentiles:
  - 12.5
  - 25
  - 37.5
  - 50
  - 62.5
  - 75
  - 87.5

# ========== 大单阈值 ==========
# 当日计算: Mean(V) + threshold_std_multiplier × Std(V)
threshold_std_multiplier: 1.0

# ========== 时间过滤（连续竞价时段）==========
# 格式: HHMMSSmmm
am_start: 93000000   # 09:30:00.000
am_end: 113000000    # 11:30:00.000
pm_start: 130000000  # 13:00:00.000
pm_end: 145700000    # 14:57:00.000

# ========== 存储参数 ==========
lmdb_map_size: 104857600  # 100MB
use_lz4: true

# ========== 处理引擎 ==========
use_polars: true
n_workers: 4
chunk_size: 100

# ========== 数据源文件命名模式 ==========
sh_trade_pattern: "{date}_sh_trade_data.parquet"
sh_order_pattern: "{date}_sh_order_data.parquet"
sz_trade_pattern: "{date}_sz_trade_data.parquet"
sz_order_pattern: "{date}_sz_order_data.parquet"
sh_snapshot_pattern: "{date}_sh_market_data_3s.parquet"
sz_snapshot_pattern: "{date}_sz_market_data_3s.parquet"

# ========== 诊断参数 ==========
min_nonzero_pixels_trade: 20
min_nonzero_pixels_order: 30
min_fill_rate_trade: 0.30
min_fill_rate_order: 0.50
